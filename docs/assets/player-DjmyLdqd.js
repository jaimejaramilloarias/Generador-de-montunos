import{_ as d}from"./index-CUnB1QCD.js";let t=null,l=null,r=null,i=null;async function p(){if(t)return t;l||(l=d(()=>import("./tone-Cvny4KXv.js"),[],import.meta.url).then(e=>(t=e,i=new e.PolySynth(e.Synth).toDestination(),e)));const o=await l;return i||(i=new o.PolySynth(o.Synth).toDestination()),o}async function T(){await(await p()).start()}async function m(o,e){const n=await p();if(await n.start(),n.Transport.stop(),n.Transport.cancel(),n.Transport.position=0,n.getTransport().bpm.value=e,r&&(r.dispose(),r=null),!o.length)return;const u=60/e,y=o.map(a=>[a.time*u,a]),c=i??new n.PolySynth(n.Synth).toDestination();i=c,r=new n.Part((a,s)=>{const f=Math.max(.1,s.duration*u);c.triggerAttackRelease(n.Frequency(s.midi,"midi"),f,a,s.velocity)},y),r.start(0)}function w(){t&&t.Transport.start()}function P(){t&&(t.Transport.stop(),t.Transport.position=0)}function S(){return t?t.Transport.state==="started":!1}export{S as isPlaying,m as loadSequence,w as play,T as prepareAudio,P as stop};
